(this.webpackJsonpchatbot=this.webpackJsonpchatbot||[]).push([[0],{126:function(e,a,t){e.exports={app:"App_app__2-W1N",header:"App_header__wq4RQ",menu:"App_menu__lIpLG",content:"App_content__3YoZt"}},151:function(e,a,t){e.exports=t(327)},156:function(e,a,t){},327:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),d=t(5),o=t.n(d),c=(t(156),t(51)),i=t(26),l=t(125),s=t(53),p={car:{id:"",model:"",brand:"",grade:"",vin:"",dilers:"",dielersName:"",address:""},loadCar:!0,loading:!0,totalCount:"",perPage:"5",page:"1"},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_CAR":return Object(s.a)({},e,{car:a.payload});case"LOAD_CAR":return Object(s.a)({},e,{loadCar:a.payload});case"LOADING_TABLE":return Object(s.a)({},e,{loading:a.payload});case"TOTAL_COUNT":return Object(s.a)({},e,{totalCount:a.payload});default:return e}},y=Object(i.c)({car:u}),g=Object(i.d)(y,Object(i.a)(l.a)),h=t(126),m=t.n(h),v=t(329),f=(t(161),t(89)),_=t.n(f),O=t(150),A=t(127),b=t(90),C=t.n(b),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return function(){var t=Object(A.a)(_.a.mark((function t(n){var r,d,o,c,i,l,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"LOADING_TABLE",payload:!0}),t.next=4,C.a.get("https://jlrc.dev.perx.ru/carstock/api/v1/vehicles/?state=active&group=new&hidden=false&page=".concat(0===e?e:e-1,"&per_page=").concat(a),{headers:{"X-CS-Dealer-Id-Only":1,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 4:return r=t.sent,d=Number(r.headers["x-total-count"]),o=new Set,c=r.data.map((function(e){return null!==e.dealer&&o.add(e.dealer),{id:e.id,model:e.model,brand:e.brand,grade:e.grade,vin:e.vin,dilers:e.dealer,dielersName:"",address:""}})),i="https://jlrc.dev.perx.ru/carstock/api/v1/dealers/?id__in=".concat(Object(O.a)(o)),t.next=11,C.a.get("".concat(i),{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 11:l=t.sent,s=l.data,c.forEach((function(e){var a=s.filter((function(a){return a.id===e.dilers}));0===a.length?(e.dielersName="\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",e.address="item"):(e.dielersName=a[0].name,e.address=a[0].offices[0].address)})),n({type:"GET_CAR",payload:c}),n({type:"TOTAL_COUNT",payload:d}),n({type:"LOAD_CAR",payload:!1}),n({type:"LOADING_TABLE",payload:!1}),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(0),n({type:"LOAD_CAR",payload:!0}),n({type:"SET_ERROR_VALUE",payload:t.t0});case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}()},j=function(){var e=Object(c.b)();Object(n.useEffect)((function(){e(E())}),[]);var a=Object(c.c)((function(e){return e.car})),t=a.car,d=a.loadCar,o=a.page,i=a.totalCount,l=a.loading,s={page:o,showSizeChanger:!1,total:i,pageSize:5,onChange:function(a,t){e(E(a,t))}};return r.a.createElement(r.a.Fragment,null,!d&&r.a.createElement(v.a,{columns:[{title:"id",dataIndex:"id",key:"id",width:"30%"},{title:"model",dataIndex:"model",key:"id",width:"20%"},{title:"brand",dataIndex:"brand",key:"id"},{title:"grade",dataIndex:"grade",key:"id"},{title:"vin",dataIndex:"vin",key:"id"},{title:"name dielrs",dataIndex:"dielersName",key:"id"},{title:"address",dataIndex:"address",key:"id"}],dataSource:t,loading:l,pagination:s,rowKey:"id"}))};var x=function(){return r.a.createElement("div",{className:m.a.app},r.a.createElement(j,null))};o.a.render(r.a.createElement(c.a,{store:g},r.a.createElement(x,null)),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.eea26417.chunk.js.map