(this.webpackJsonpchatbot=this.webpackJsonpchatbot||[]).push([[0],{127:function(e,a,t){e.exports={app:"App_app__2-W1N",header:"App_header__wq4RQ",menu:"App_menu__lIpLG",content:"App_content__3YoZt"}},151:function(e,a,t){e.exports=t(327)},156:function(e,a,t){},327:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),d=t(5),c=t.n(d),o=(t(156),t(53)),l=t(27),i=t(126),s=t(17),p=t(34),u={car:{id:"",model:"",brand:"",grade:"",vin:"",dilers:"",dielersName:"",address:""},dilers:[],dillersID:[],loadCar:!0,loading:!0,totalCount:"",perPage:"5",page:"1"},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_CAR":return Object(p.a)({},e,{car:a.payload});case"LOAD_CAR":return Object(p.a)({},e,{loadCar:a.payload});case"LOADING_TABLE":return Object(p.a)({},e,{loading:a.payload});case"TOTAL_COUNT":return Object(p.a)({},e,{totalCount:a.payload});case"SET_DILERS":return Object(p.a)({},e,{dilers:[].concat(Object(s.a)(e.dilers),Object(s.a)(a.payload))});case"GET_DILERS_ID":return Object(p.a)({},e,{dillersID:[].concat(Object(s.a)(e.dillersID),Object(s.a)(a.payload))});default:return e}},g=Object(l.c)({car:y}),O=Object(l.d)(g,Object(l.a)(i.a)),b=t(127),_=t.n(b),f=t(329),h=(t(161),t(90)),m=t.n(h),v=t(128),A=t(91),E=t.n(A),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return function(){var r=Object(v.a)(m.a.mark((function r(d){var c,o,l,i,p,u,y,g,O;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,d({type:"LOADING_TABLE",payload:!0}),r.next=4,E.a.get("https://jlrc.dev.perx.ru/carstock/api/v1/vehicles/?state=active&group=new&hidden=false&page=".concat(0===e?e:e-1,"&per_page=").concat(a),{headers:{"X-CS-Dealer-Id-Only":1,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 4:if(c=r.sent,o=Number(c.headers["x-total-count"]),l=new Set,i=c.data.map((function(e){return null!==e.dealer&&l.add(e.dealer),{id:e.id,model:e.model,brand:e.brand,grade:e.grade,vin:e.vin,dilers:e.dealer,dielersName:"",address:""}})),d({type:"GET_DILERS_ID",payload:l}),p=new Set,Array.from(l).map((function(e){t.some((function(a){return a===e}))||p.add(e)})),u=function(e){i.forEach((function(a){var t=e.filter((function(e){return e.id===a.dilers}));0===t.length?(a.dielersName="\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",a.address=a):(a.dielersName=t[0].name,a.address=t[0].offices[0].address)}))},y=[],!(p.size>0)){r.next=20;break}return g="https://jlrc.dev.perx.ru/carstock/api/v1/dealers/?id__in=".concat(Object(s.a)(p)),r.next=17,E.a.get("".concat(g),{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 17:O=r.sent,y=O.data,d({type:"SET_DILERS",payload:y});case 20:u([].concat(Object(s.a)(n),Object(s.a)(y))),d({type:"GET_CAR",payload:i}),d({type:"TOTAL_COUNT",payload:o}),d({type:"LOAD_CAR",payload:!1}),d({type:"LOADING_TABLE",payload:!1}),r.next=31;break;case 27:r.prev=27,r.t0=r.catch(0),d({type:"LOAD_CAR",payload:!0}),d({type:"SET_ERROR_VALUE",payload:r.t0});case 31:case"end":return r.stop()}}),r,null,[[0,27]])})));return function(e){return r.apply(this,arguments)}}()},I=function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.car})),t=a.car,d=a.loadCar,c=a.page,l=a.perPage,i=a.totalCount,s=a.loading,p=a.dillersID,u=a.dilers;Object(n.useEffect)((function(){e(j(c,l,p,u))}),[]);var y={page:c,showSizeChanger:!1,total:i,pageSize:5,onChange:function(a,t){e(j(a,t,p,u))}};return r.a.createElement(r.a.Fragment,null,!d&&r.a.createElement(f.a,{columns:[{title:"id",dataIndex:"id",key:"id",width:"30%"},{title:"model",dataIndex:"model",key:"id",width:"20%"},{title:"brand",dataIndex:"brand",key:"id"},{title:"grade",dataIndex:"grade",key:"id"},{title:"vin",dataIndex:"vin",key:"id"},{title:"name dielrs",dataIndex:"dielersName",key:"id"},{title:"address",dataIndex:"address",key:"id"}],dataSource:t,loading:s,pagination:y,rowKey:"id"}))};var C=function(){return r.a.createElement("div",{className:_.a.app},r.a.createElement(I,null))};c.a.render(r.a.createElement(o.a,{store:O},r.a.createElement(C,null)),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.cb55d560.chunk.js.map