{"version":3,"sources":["component/App/App.module.css","reducers/carReducer.js","reducers/types.js","reducers/index.js","store/index.js","actions/index.js","component/CarTable/index.js","component/CarTable/CarTable.js","component/App/App.js","index.js"],"names":["module","exports","initialState","car","id","model","brand","grade","vin","dilers","dielersName","address","loadCar","loading","totalCount","perPage","page","carReducer","state","action","type","payload","reducers","combineReducers","store","createStore","applyMiddleware","thunk","fetchGetCar","dispatch","a","axios","get","headers","response","Number","dataCar","data","map","item","dealer","push","url","responseDealers","forEach","findName","filter","length","name","offices","CarTable","useDispatch","useEffect","useSelector","pagination","showSizeChanger","total","pageSize","onChange","pages","columns","title","dataIndex","key","width","dataSource","rowKey","App","className","styles","app","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.50da083f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2-W1N\",\"header\":\"App_header__wq4RQ\",\"menu\":\"App_menu__lIpLG\",\"content\":\"App_content__3YoZt\"};","import {\n\tGET_CAR, LOAD_CAR, TOTAL_COUNT, LOADING_TABLE,\n} from './types';\n\nconst initialState = {\n\tcar: {\n\t\tid: \"\",\n\t\tmodel: \"\",\n\t\tbrand: \"\",\n\t\tgrade: \"\",\n\t\tvin: \"\",\n\t\tdilers: \"\",\n\t\tdielersName: \"\",\n\t\taddress: \"\",\n\t},\n\tloadCar: true,\n\tloading: true,\n\ttotalCount: \"\",\n\tperPage: \"5\",\n\tpage: \"1\",\n};\n\nconst carReducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\tcase GET_CAR:\n\t\treturn {\n\t\t\t...state,\n\t\t\tcar: action.payload,\n\t\t};\n\tcase LOAD_CAR:\n\t\treturn {\n\t\t\t...state,\n\t\t\tloadCar: action.payload,\n\t\t};\n\tcase LOADING_TABLE:\n\t\treturn {\n\t\t\t...state,\n\t\t\tloading: action.payload,\n\t\t};\n\tcase TOTAL_COUNT:\n\t\treturn {\n\t\t\t...state,\n\t\t\ttotalCount: action.payload,\n\t\t};\n\tdefault:\n\t\treturn state;\n\t}\n};\n\n\nexport default carReducer;\n","export const GET_CAR = 'GET_CAR';\nexport const SET_ERROR_VALUE = 'SET_ERROR_VALUE';\nexport const LOAD_CAR = 'LOAD_CAR';\nexport const LOAD_DILERS = 'LOAD_DILERS';\nexport const GET_DILERS_ID = 'GET_DILERS_ID';\nexport const TOTAL_COUNT = 'TOTAL_COUNT';\nexport const LOADING_TABLE = 'LOADING_TABLE';\n","import { combineReducers } from 'redux';\n\nimport carReducer from \"./carReducer\";\n\n\nconst reducers = combineReducers({\n\tcar: carReducer,\n});\n\nexport default reducers;\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducers from '../reducers';\n\n\nconst store = createStore(reducers, applyMiddleware(\n\tthunk,\n));\nexport default store;\n","import axios from 'axios';\nimport { GET_CAR, SET_ERROR_VALUE, LOAD_CAR, TOTAL_COUNT, LOADING_TABLE } from '../reducers/types';\n\nconst getCar = (payload) => ({\n\ttype: GET_CAR,\n\tpayload,\n});\nconst setErrorValue = (payload) => ({\n\ttype: SET_ERROR_VALUE,\n\tpayload,\n});\nconst loadCar = (payload) => ({\n\ttype: LOAD_CAR,\n\tpayload,\n});\n\nconst fetchGetCar = (page = 0, perPage = 5) => async (dispatch) => {\n\ttry {\n\t\tdispatch({ type: LOADING_TABLE, payload: true });\n\n\t\tconst response = await axios.get(\n\t\t\t`https://jlrc.dev.perx.ru/carstock/api/v1/vehicles/?state=active&group=new&hidden=false&page=${page === 0 ? page : page-1 }&per_page=${perPage}`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\t'X-CS-Dealer-Id-Only': 1,\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Access-Control-Allow-Origin': '*',\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tconst totalCount = Number(response.headers['x-total-count']);\n\t\tconst id = [];\n\t\tconst dataCar = response.data.map((item) => {\n\t\t\tif (item.dealer !== null) {\n\t\t\t\tid.push(item.dealer);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid: item.id,\n\t\t\t\tmodel: item.model,\n\t\t\t\tbrand: item.brand,\n\t\t\t\tgrade: item.grade,\n\t\t\t\tvin: item.vin,\n\t\t\t\tdilers: item.dealer,\n\t\t\t\tdielersName: \"\",\n\t\t\t\taddress: \"\",\n\t\t\t};\n\t\t});\n\t\tconst url = `https://jlrc.dev.perx.ru/carstock/api/v1/dealers/?id__in=${[...id]}`;\n\t\tconst responseDealers = await axios.get(\n\t\t\t`${url}`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Access-Control-Allow-Origin': '*',\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tconst dealer = responseDealers.data;\n\t\tdataCar.forEach((item) => {\n\t\t\tconst findName = dealer.filter((dealer) => dealer.id === item.dilers);\n\t\t\tif (findName.length === 0) {\n\t\t\t\titem.dielersName = 'отсутствует';\n\t\t\t\titem.address = \"item\";\n\t\t\t} else {\n\t\t\t\titem.dielersName = findName[0].name;\n\t\t\t\titem.address = findName[0].offices[0].address;\n\t\t\t}\n\t\t});\n\t\tdispatch({ type: GET_CAR, payload: dataCar });\n\t\tdispatch({ type: TOTAL_COUNT, payload: totalCount });\n\t\tdispatch({ type: LOAD_CAR, payload: false });\n\t\tdispatch({ type: LOADING_TABLE, payload: false });\n\n\t} catch (error) {\n\t\tdispatch({ type: LOAD_CAR, payload: true });\n\t\tdispatch({ type: SET_ERROR_VALUE, payload: error });\n\t}\n};\n\n\nexport {\n\tfetchGetCar,\n\tsetErrorValue,\n\tgetCar,\n\tloadCar,\n};\n","import CarTable from \"./CarTable\";\n\nexport default CarTable;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Table } from 'antd';\nimport 'antd/dist/antd.css';\nimport { fetchGetCar } from \"../../actions\";\n\n\nconst CarTable = () => {\n\tconst dispatch = useDispatch();\n\tuseEffect(() => {\n\t\tdispatch(fetchGetCar());\n\t}, []);\n\tconst {\n\t\tcar, loadCar, page, totalCount, loading,\n\t} = useSelector((state) => state.car);\n\n\tconst columns = [\n\t\t{\n\t\t\ttitle: 'id',\n\t\t\tdataIndex: 'id',\n\t\t\tkey: 'id',\n\t\t\twidth: '30%',\n\t\t},\n\t\t{\n\t\t\ttitle: 'model',\n\t\t\tdataIndex: 'model',\n\t\t\tkey: 'id',\n\t\t\twidth: '20%',\n\t\t},\n\t\t{\n\t\t\ttitle: 'brand',\n\t\t\tdataIndex: 'brand',\n\t\t\tkey: 'id',\n\t\t},\n\t\t{\n\t\t\ttitle: 'grade',\n\t\t\tdataIndex: 'grade',\n\t\t\tkey: 'id',\n\t\t},\n\t\t{\n\t\t\ttitle: 'vin',\n\t\t\tdataIndex: 'vin',\n\t\t\tkey: 'id',\n\t\t},\n\t\t{\n\t\t\ttitle: 'name dielrs',\n\t\t\tdataIndex: 'dielersName',\n\t\t\tkey: 'id',\n\t\t},\n\t\t{\n\t\t\ttitle: 'address',\n\t\t\tdataIndex: 'address',\n\t\t\tkey: 'id',\n\t\t},\n\t];\n\tconst goToPage = (pages, perPage) => {\n\t\tdispatch(fetchGetCar(pages, perPage));\n\t};\n\n\tconst pagination = {\n\t\tpage,\n\t\tshowSizeChanger: false,\n\t\ttotal: totalCount,\n\t\tpageSize: 5,\n\t\tonChange: goToPage,\n\t};\n\treturn (\n\t\t<>\n\t\t\t{ !loadCar && <Table\n\t\t\t\tcolumns={columns}\n\t\t\t\tdataSource={car}\n\t\t\t\tloading={loading}\n\t\t\t\tpagination={pagination}\n\t\t\t\trowKey='id'\n\t\t\t/> }\n\t\t</>\n\t);\n};\nexport default CarTable;\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport styles from './App.module.css';\nimport CarTable from \"../CarTable\";\n\nfunction App() {\n\n\treturn (\n\t\t<div className={styles.app}>\n\t\t\t<CarTable />\n\t\t</div>\n\t);\n}\n\nexport default App;\n\nApp.propTypes = {\n\tjwt: PropTypes.string,\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport App from './component/App/App';\n\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById('root'),\n);\n"],"sourceRoot":""}