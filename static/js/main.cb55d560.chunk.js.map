{"version":3,"sources":["component/App/App.module.css","reducers/carReducer.js","reducers/types.js","reducers/index.js","store/index.js","actions/index.js","component/CarTable/index.js","component/CarTable/CarTable.js","component/App/App.js","index.js"],"names":["module","exports","initialState","car","id","model","brand","grade","vin","dilers","dielersName","address","dillersID","loadCar","loading","totalCount","perPage","page","carReducer","state","action","type","payload","reducers","combineReducers","store","createStore","applyMiddleware","thunk","fetchGetCar","dispatch","a","axios","get","headers","response","Number","Set","dataCar","data","map","item","dealer","add","resID","Array","from","some","el","searchDilersName","dilersArray","forEach","findName","filter","length","name","offices","resDealer","size","url","responseDealers","CarTable","useDispatch","useSelector","useEffect","pagination","showSizeChanger","total","pageSize","onChange","pages","columns","title","dataIndex","key","width","dataSource","rowKey","App","className","styles","app","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cb55d560.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2-W1N\",\"header\":\"App_header__wq4RQ\",\"menu\":\"App_menu__lIpLG\",\"content\":\"App_content__3YoZt\"};","import {\n\tGET_CAR, LOAD_CAR, TOTAL_COUNT, LOADING_TABLE, SET_DILERS, GET_DILERS_ID,\n} from './types';\n\nconst initialState = {\n\tcar: {\n\t\tid: \"\",\n\t\tmodel: \"\",\n\t\tbrand: \"\",\n\t\tgrade: \"\",\n\t\tvin: \"\",\n\t\tdilers: \"\",\n\t\tdielersName: \"\",\n\t\taddress: \"\",\n\t},\n\tdilers: [],\n\tdillersID: [],\n\tloadCar: true,\n\tloading: true,\n\ttotalCount: \"\",\n\tperPage: \"5\",\n\tpage: \"1\",\n};\n\nconst carReducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\tcase GET_CAR:\n\t\treturn {\n\t\t\t...state,\n\t\t\tcar: action.payload,\n\t\t};\n\tcase LOAD_CAR:\n\t\treturn {\n\t\t\t...state,\n\t\t\tloadCar: action.payload,\n\t\t};\n\tcase LOADING_TABLE:\n\t\treturn {\n\t\t\t...state,\n\t\t\tloading: action.payload,\n\t\t};\n\tcase TOTAL_COUNT:\n\t\treturn {\n\t\t\t...state,\n\t\t\ttotalCount: action.payload,\n\t\t};\n\tcase SET_DILERS:\n\t\treturn {\n\t\t\t...state,\n\t\t\tdilers: [\n\t\t\t\t...state.dilers,\n\t\t\t\t...action.payload,\n\t\t\t],\n\t\t};\n\t\tcase GET_DILERS_ID:\n\t\treturn {\n\t\t\t...state,\n\t\t\tdillersID: [\n\t\t\t\t...state.dillersID,\n\t\t\t\t...action.payload,\n\t\t\t],\n\t\t};\n\tdefault:\n\t\treturn state;\n\t}\n};\n\n\nexport default carReducer;\n","export const GET_CAR = 'GET_CAR';\nexport const SET_ERROR_VALUE = 'SET_ERROR_VALUE';\nexport const LOAD_CAR = 'LOAD_CAR';\nexport const LOAD_DILERS = 'LOAD_DILERS';\nexport const GET_DILERS_ID = 'GET_DILERS_ID';\nexport const TOTAL_COUNT = 'TOTAL_COUNT';\nexport const LOADING_TABLE = 'LOADING_TABLE';\nexport const SET_DILERS = 'SET_DILERS';\n","import { combineReducers } from 'redux';\n\nimport carReducer from \"./carReducer\";\n\n\nconst reducers = combineReducers({\n\tcar: carReducer,\n});\n\nexport default reducers;\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducers from '../reducers';\n\n\nconst store = createStore(reducers, applyMiddleware(\n\tthunk,\n));\nexport default store;\n","import axios from 'axios';\nimport {\n\tGET_CAR,\n\tSET_ERROR_VALUE,\n\tLOAD_CAR,\n\tTOTAL_COUNT,\n\tLOADING_TABLE,\n\tSET_DILERS,\n\tGET_DILERS_ID,\n} from '../reducers/types';\n\nconst getCar = (payload) => ({\n\ttype: GET_CAR,\n\tpayload,\n});\nconst setErrorValue = (payload) => ({\n\ttype: SET_ERROR_VALUE,\n\tpayload,\n});\nconst loadCar = (payload) => ({\n\ttype: LOAD_CAR,\n\tpayload,\n});\n\nconst fetchGetCar = (page = 0, perPage = 5, dillersID, dilers) => async (dispatch) => {\n\ttry {\n\t\tdispatch({ type: LOADING_TABLE, payload: true });\n\n\t\tconst response = await axios.get(\n\t\t\t`https://jlrc.dev.perx.ru/carstock/api/v1/vehicles/?state=active&group=new&hidden=false&page=${page === 0 ? page : page - 1}&per_page=${perPage}`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\t'X-CS-Dealer-Id-Only': 1,\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Access-Control-Allow-Origin': '*',\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tconst totalCount = Number(response.headers['x-total-count']);\n\t\tconst id = new Set();\n\t\tconst dataCar = response.data.map((item) => {\n\t\t\tif (item.dealer !== null) {\n\t\t\t\tid.add(item.dealer);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid: item.id,\n\t\t\t\tmodel: item.model,\n\t\t\t\tbrand: item.brand,\n\t\t\t\tgrade: item.grade,\n\t\t\t\tvin: item.vin,\n\t\t\t\tdilers: item.dealer,\n\t\t\t\tdielersName: \"\",\n\t\t\t\taddress: \"\",\n\t\t\t};\n\t\t});\n\n\t\tdispatch({ type: GET_DILERS_ID, payload: id });\n\t\tconst resID = new Set();\n\t\tArray.from(id).map((item) => {\n\t\t\tif (!dillersID.some((el) => el === item)) {\n\t\t\t\tresID.add(item);\n\t\t\t}\n\t\t});\n\t\tconst searchDilersName = (dilersArray) => {\n\t\t\tdataCar.forEach((item) => {\n\t\t\t\tconst findName = dilersArray.filter((dealer) => dealer.id === item.dilers);\n\t\t\t\tif (findName.length === 0) {\n\t\t\t\t\titem.dielersName = 'отсутствует';\n\t\t\t\t\titem.address = item;\n\t\t\t\t} else {\n\t\t\t\t\titem.dielersName = findName[0].name;\n\t\t\t\t\titem.address = findName[0].offices[0].address;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tlet resDealer = [];\n\t\tif (resID.size > 0) {\n\t\t\tconst url = `https://jlrc.dev.perx.ru/carstock/api/v1/dealers/?id__in=${[...resID]}`;\n\t\t\tconst responseDealers = await axios.get(\n\t\t\t\t`${url}`,\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'Access-Control-Allow-Origin': '*',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tresDealer = responseDealers.data;\n\t\t\tdispatch({ type: SET_DILERS, payload: resDealer });\n\t\t}\n\t\tsearchDilersName([...dilers, ...resDealer]);\n\t\tdispatch({ type: GET_CAR, payload: dataCar });\n\t\tdispatch({ type: TOTAL_COUNT, payload: totalCount });\n\t\tdispatch({ type: LOAD_CAR, payload: false });\n\t\tdispatch({ type: LOADING_TABLE, payload: false });\n\t} catch (error) {\n\t\tdispatch({ type: LOAD_CAR, payload: true });\n\t\tdispatch({ type: SET_ERROR_VALUE, payload: error });\n\t}\n};\n\n\nexport {\n\tfetchGetCar,\n\tsetErrorValue,\n\tgetCar,\n\tloadCar,\n};\n","import CarTable from \"./CarTable\";\n\nexport default CarTable;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Table } from 'antd';\nimport 'antd/dist/antd.css';\nimport { fetchGetCar } from \"../../actions\";\n\n\nconst CarTable = () => {\n\tconst dispatch = useDispatch();\n\tconst {\n\t\tcar, loadCar, page, perPage, totalCount, loading, dillersID, dilers,\n\t} = useSelector((state) => state.car);\n\tuseEffect(() => {\n\t\tdispatch(fetchGetCar(page, perPage, dillersID, dilers));\n\t}, []);\n\tconst columns = [\n\t\t{\n\t\t\ttitle: 'id',\n\t\t\tdataIndex: 'id',\n\t\t\tkey: 'id',\n\t\t\twidth: '30%',\n\t\t},\n\t\t{\n\t\t\ttitle: 'model',\n\t\t\tdataIndex: 'model',\n\t\t\tkey: 'id',\n\t\t\twidth: '20%',\n\t\t},\n\t\t{\n\t\t\ttitle: 'brand',\n\t\t\tdataIndex: 'brand',\n\t\t\tkey: 'id',\n\t\t},\n\t\t{\n\t\t\ttitle: 'grade',\n\t\t\tdataIndex: 'grade',\n\t\t\tkey: 'id',\n\t\t},\n\t\t{\n\t\t\ttitle: 'vin',\n\t\t\tdataIndex: 'vin',\n\t\t\tkey: 'id',\n\t\t},\n\t\t{\n\t\t\ttitle: 'name dielrs',\n\t\t\tdataIndex: 'dielersName',\n\t\t\tkey: 'id',\n\t\t},\n\t\t{\n\t\t\ttitle: 'address',\n\t\t\tdataIndex: 'address',\n\t\t\tkey: 'id',\n\t\t},\n\t];\n\tconst goToPage = (pages, perPage, ) => {\n\t\tdispatch(fetchGetCar(pages, perPage, dillersID, dilers));\n\t};\n\n\tconst pagination = {\n\t\tpage,\n\t\tshowSizeChanger: false,\n\t\ttotal: totalCount,\n\t\tpageSize: 5,\n\t\tonChange: goToPage,\n\t};\n\treturn (\n\t\t<>\n\t\t\t{ !loadCar && <Table\n\t\t\t\tcolumns={columns}\n\t\t\t\tdataSource={car}\n\t\t\t\tloading={loading}\n\t\t\t\tpagination={pagination}\n\t\t\t\trowKey='id'\n\t\t\t/> }\n\t\t</>\n\t);\n};\nexport default CarTable;\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport styles from './App.module.css';\nimport CarTable from \"../CarTable\";\n\nfunction App() {\n\n\treturn (\n\t\t<div className={styles.app}>\n\t\t\t<CarTable />\n\t\t</div>\n\t);\n}\n\nexport default App;\n\nApp.propTypes = {\n\tjwt: PropTypes.string,\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport App from './component/App/App';\n\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById('root'),\n);\n"],"sourceRoot":""}